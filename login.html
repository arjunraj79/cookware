<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sign In — ONS Cookers</title>
    <script src="/components/js/head.js"></script>
</head>
<body>
    <script src="/components/js/header.js"></script>
    <script src="/components/js/mobile-nav.js"></script>

    <main style="padding:2rem;">
        <section style="max-width:900px;margin:0 auto;">
            <h1 style="text-align:center;margin-bottom:0.5rem;">Welcome Back</h1>
            <p style="text-align:center;color:#666;margin-bottom:1.5rem;">Sign in to your account or create a new one.</p>

            <div style="display:grid;grid-template-columns:1fr;gap:2rem;align-items:start;max-width:640px;margin:0 auto;">

                <!-- Sign In -->
                <div id="signin-pane" class="contact-form-wrapper" style="padding:1.5rem;">
                    <h2>Sign In</h2>
                    <form id="signin-form" autocomplete="on">
                        <div class="form-group">
                            <label for="signin-email">Email</label>
                            <input id="signin-email" type="email" required placeholder="you@example.com">
                        </div>
                        <div class="form-group">
                            <label for="signin-password">Password</label>
                            <input id="signin-password" type="password" required placeholder="Enter your password">
                        </div>
                        <div style="display:flex;gap:1rem;align-items:center;">
                            <button type="submit" class="btn-primary">Sign In</button>
                            <button type="button" id="show-signup" class="btn-secondary">Create account</button>
                        </div>
                        <div id="signin-message" style="margin-top:1rem;color:#b00020;"></div>
                    </form>
                </div>

                <!-- Sign Up (hidden by default) -->
                <div id="signup-pane" class="contact-form-wrapper" style="padding:1.5rem;display:none;">
                    <h2>Create Account</h2>
                    <form id="signup-form" autocomplete="on">
                        <div class="form-group">
                            <label for="signup-name">Full name</label>
                            <input id="signup-name" type="text" required placeholder="Your full name">
                        </div>
                        <div class="form-group">
                            <label for="signup-email">Email</label>
                            <input id="signup-email" type="email" required placeholder="you@example.com">
                        </div>
                        <div class="form-group">
                            <label for="signup-phone">Phone (optional)</label>
                            <input id="signup-phone" type="tel" placeholder="+91 98765 43210">
                        </div>
                        <div class="form-group">
                            <label for="signup-password">Password</label>
                            <input id="signup-password" type="password" required placeholder="Create a password">
                        </div>
                        <div class="form-group">
                            <label for="signup-confirm">Confirm password</label>
                            <input id="signup-confirm" type="password" required placeholder="Confirm password">
                        </div>
                        <div style="display:flex;gap:1rem;align-items:center;">
                            <button type="submit" class="btn-primary">Create account</button>
                            <button type="button" id="show-signin" class="btn-secondary">Already have an account?</button>
                        </div>
                        <div id="signup-message" style="margin-top:1rem;color:#b00020;"></div>
                    </form>
                </div>

            </div>
        </section>
    </main>

    <footer>
        <script src="/components/js/footer.js"></script>
    </footer>

    <script>
    (function(){
        // simple client-side demo auth using localStorage (for static site demo only)
        function getUsers(){
            try{ return JSON.parse(localStorage.getItem('users')) || []; }catch(e){ return []; }
        }
        function saveUsers(u){ localStorage.setItem('users', JSON.stringify(u)); }

        // Sign up
        const signupForm = document.getElementById('signup-form');
        const signupMsg = document.getElementById('signup-message');
        signupForm && signupForm.addEventListener('submit', function(e){
            e.preventDefault(); signupMsg.textContent='';
            const name = document.getElementById('signup-name').value.trim();
            const email = document.getElementById('signup-email').value.trim().toLowerCase();
            const phone = document.getElementById('signup-phone').value.trim();
            const pass = document.getElementById('signup-password').value;
            const confirm = document.getElementById('signup-confirm').value;
            if(!name || !email || !pass){ signupMsg.textContent = 'Please fill required fields.'; return; }
            if(pass.length < 6){ signupMsg.textContent = 'Password should be at least 6 characters.'; return; }
            if(pass !== confirm){ signupMsg.textContent = 'Passwords do not match.'; return; }
            const users = getUsers();
            if(users.find(u=>u.email===email)){ signupMsg.textContent = 'An account with this email already exists.'; return; }
            const user = { id: 'u_' + Date.now(), name, email, phone, password: pass };
            users.push(user); saveUsers(users);
            localStorage.setItem('currentUser', JSON.stringify({ id: user.id, name: user.name, email: user.email }));
            signupMsg.style.color = '#0a7a0a'; signupMsg.textContent = 'Account created — signing you in...';
            setTimeout(()=>{ window.location.href = '/index.html'; }, 900);
        });

        // Sign in
        const signinForm = document.getElementById('signin-form');
        const signinMsg = document.getElementById('signin-message');
        signinForm && signinForm.addEventListener('submit', function(e){
            e.preventDefault(); signinMsg.textContent='';
            const email = document.getElementById('signin-email').value.trim().toLowerCase();
            const pass = document.getElementById('signin-password').value;
            if(!email || !pass){ signinMsg.textContent = 'Please enter email and password.'; return; }
            const users = getUsers();
            const user = users.find(u=>u.email===email && u.password===pass);
            if(!user){ signinMsg.textContent = 'Invalid credentials.'; return; }
            localStorage.setItem('currentUser', JSON.stringify({ id:user.id, name:user.name, email:user.email }));
            signinMsg.style.color = '#0a7a0a'; signinMsg.textContent = 'Signed in — redirecting...';
            setTimeout(()=>{ window.location.href = '/index.html'; }, 700);
        });

        // Toggle view helpers: show only one pane at a time
        const signinPane = document.getElementById('signin-pane');
        const signupPane = document.getElementById('signup-pane');
        const showSignupBtn = document.getElementById('show-signup');
        const showSigninBtn = document.getElementById('show-signin');

        function showSignup(){
            if(signinPane) signinPane.style.display = 'none';
            if(signupPane) signupPane.style.display = 'block';
            window.scrollTo({top:0,behavior:'smooth'});
            const el = document.getElementById('signup-name'); if(el) el.focus();
        }

        function showSignin(){
            if(signupPane) signupPane.style.display = 'none';
            if(signinPane) signinPane.style.display = 'block';
            window.scrollTo({top:0,behavior:'smooth'});
            const el = document.getElementById('signin-email'); if(el) el.focus();
        }

        showSignupBtn && showSignupBtn.addEventListener('click', showSignup);
        showSigninBtn && showSigninBtn.addEventListener('click', showSignin);
    })();
    </script>
</body>
</html>
