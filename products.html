<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Products — ONS Cookers</title>
  <meta name="description" content="All products" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
 <header class="sticky-header">
    <nav class="navbar">

        <!-- LEFT -->
        <div class="navbar-left">
            <div class="hamburger-menu">
                <i class="fa-solid fa-grip"></i>
            </div>
        </div>

        <!-- CENTER -->
        <div class="navbar-center">
            <div class="mobile-search">
                <input type="search" placeholder="Search products..." aria-label="Search">
            </div>

            <!-- DESKTOP LOGO -->
            <div class="logo logo-desktop">
                <a href="index.html">
                    <img src="assets/img/ONS-cooker.svg" alt="ONS Cookers" class="site-logo">
                </a>
            </div>
        </div>

        <!-- RIGHT -->
        <div class="navbar-right">

            <!-- MOBILE LOGO -->
            <div class="logo logo-mobile">
                <a href="index.html">
                    <img src="assets/img/ONS-cooker.svg" alt="ONS Cookers" class="site-logo">
                </a>
            </div>

            <!-- ICONS (Desktop only) -->
            <div class="header-icons">
                <a href="#" id="search-icon"><i class="fa-solid fa-magnifying-glass"></i></a>
                <a href="cart.html" class="cart-icon-container">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span class="cart-count">0</span>
                </a>
                <a href="#"><i class="fa-solid fa-user"></i></a>
            </div>

        </div>
    </nav>

    <!-- OPTIONAL EXPAND SEARCH BAR -->
    <div id="search-bar" class="search-bar">
        <input type="text" placeholder="Search for products..." id="search-input">
        <button id="close-search"><i class="fa-solid fa-times"></i></button>
    </div>
</header>

  <div class="mobile-nav">
    <div class="mobile-nav-header">
      <div class="close-btn">
        <i class="fa-solid fa-times"></i>
      </div>
    </div>
    <ul class="mobile-nav-links">
      <li><a href="index.html">Home</a></li>
      <li class="has-submenu">
        <a href="#">Products <i class="fa-solid fa-chevron-right"></i></a>
        <ul class="submenu">
          <li class="submenu-back"><a href="#"><i class="fa-solid fa-chevron-left"></i> Back</a></li>
          <li><a href="#">Cooker</a></li>
          <li class="has-submenu">
            <a href="#">Cookware <i class="fa-solid fa-chevron-right"></i></a>
            <ul class="submenu">
              <li class="submenu-back"><a href="#"><i class="fa-solid fa-chevron-left"></i> Back</a></li>
              <li><a href="#">Frying Pan</a></li>
              <li><a href="#">Tava</a></li>
              <li><a href="#">Deep Fry Pan</a></li>
              <li><a href="#">Sets</a></li>
              <li><a href="#">Saucepan</a></li>
              <li><a href="#">Handi</a></li>
            </ul>
          </li>
          <li><a href="#">Electricals</a></li>
          <li><a href="#">Parts & Accessories</a></li>
        </ul>
      </li>
      <li><a href="about.html">About Us</a></li>
      <li><a href="#">Contact Us</a></li>
      <li><a href="benefits-of-pressure-cooking.html">Benefits of Pressure Cooking</a></li>
      <li><a href="#">Blog</a></li>
      <li><a href="#">Store Locator</a></li>
      <li><a href="legal.html">Legal</a></li>
      <li><a href="privacy-policy.html">Privacy Policy</a></li>
      <li><a href="terms-of-use.html">Terms of Use</a></li>
      <li><a href="products.html">View All Products</a></li>
    </ul>
  </div>

  <main>
    <section style="padding:2rem;text-align:left;">
      <h1>All Products</h1>
      <p style="color:#555;margin-bottom:1rem;">Browse all Steelbird products. Click a product to open its product page.</p>
    </section>

    <section style="padding:2rem;">
      <div id="products-grid" class="product-grid"></div>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="#">Products</a></li>
          <li><a href="about.html">About Us</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Follow Us</h3>
        <div class="social-icons">
          <a href="#"><i class="fa-brands fa-facebook"></i></a>
          <a href="#"><i class="fa-brands fa-instagram"></i></a>
        </div>
      </div>
      <div class="footer-section">
        <h3>Contact</h3>
        <p>Email: info@onscookers.com</p>
      </div>
    </div>
    <div class="footer-bottom"><p>&copy; 2025 ONS Cookers. All Rights Reserved.</p></div>
  </footer>

  <button id="scroll-to-top"><i class="fa-solid fa-arrow-up"></i></button>

  <script src="main.js"></script>
  <nav class="mobile-bottom-nav" aria-label="Mobile navigation">
    <div class="nav-row">
      <a href="#" class="mobile-menu"><i class="fa-solid fa-bars"></i><span>Menu</span></a>
      <a href="cart.html" class="mobile-cart"><i class="fa-solid fa-cart-shopping"></i><span>Cart</span></a>
      <a href="index.html" class="mobile-home"><i class="fa-solid fa-home"></i><span>Home</span></a>
      <a href="#" class="mobile-login"><i class="fa-solid fa-user"></i><span>Profile</span></a>
    </div>
  </nav>
  <script>
    (function(){
      // load products from categories/products.json and render a grid (supports optional search query ?q=...)
      const urlParams = new URLSearchParams(window.location.search);
      const searchQuery = (urlParams.get('q') || '').trim();

      fetch('categories/products.json')
        .then(r => r.json())
        .then(products => {
          const grid = document.getElementById('products-grid');
          if(!grid) return;
          grid.innerHTML = '';

          let shown = products;
          if(searchQuery){
            const q = searchQuery.toLowerCase();
            shown = products.filter(p => {
              if(!p) return false;
              if((p.id||'').toLowerCase().includes(q)) return true;
              if((p.title||'').toLowerCase().includes(q)) return true;
              if((p.subtitle||'').toLowerCase().includes(q)) return true;
              if((p.descriptionHtml||'').toLowerCase().replace(/<[^>]*>/g,'').includes(q)) return true;
              if(Array.isArray(p.features) && p.features.join(' ').toLowerCase().includes(q)) return true;
              if(p.specs && Object.values(p.specs).join(' ').toLowerCase().includes(q)) return true;
              return false;
            });
            const heading = document.querySelector('main h1');
            if(heading) heading.textContent = `Search results for "${searchQuery}"`;
            if(shown.length === 0){
              const p = document.createElement('p');
              p.textContent = 'No products found for your search.';
              p.style.color = '#777';
              p.style.marginTop = '0.5rem';
              document.querySelector('main').insertBefore(p, document.querySelector('main').children[1]);
            }
          }

          shown.forEach(p => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.dataset.id = p.id || '';
            const img = (p.images && p.images[0]) ? p.images[0] : 'assets/images/category-1.jpg';
            card.innerHTML = `
              <a href="categories/product-template.html?id=${encodeURIComponent(p.id)}"><img src="${img}" alt="${p.title || ''}"></a>
              <h3><a href="categories/product-template.html?id=${encodeURIComponent(p.id)}">${p.title || ''}</a></h3>
              <p>₹${p.price || 0}</p>
              <button class="btn-secondary">Add to Cart</button>
            `;
            grid.appendChild(card);
          });
        })
        .catch(err => { console.error('Failed to load products', err); });

      // delegate add-to-cart from grid
      document.addEventListener('click', function(e){
        if(e.target.classList.contains('btn-secondary') && e.target.closest('.product-card')){
          const card = e.target.closest('.product-card');
          const id = card.dataset.id;
          fetch('categories/products.json').then(r=>r.json()).then(products=>{
            const p = products.find(x=>x.id===id);
            if(!p) return alert('Product not found');
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existing = cart.find(i=>i.id===p.id);
            if(existing) existing.quantity++;
            else cart.push({ id:p.id, name:p.title, price:p.price, image:(p.images&&p.images[0])||'', quantity:1 });
            localStorage.setItem('cart', JSON.stringify(cart));
            const cartCount = document.querySelector('.cart-count'); if(cartCount) cartCount.textContent = cart.reduce((acc, i)=>acc+i.quantity,0);
            // silently update cart count
          });
        }
      });
    })();
  </script>
</body>
</html>