<!DOCTYPE html>
<html lang="en">
<head>
    <script src="/components/js/head.js"></script>
</head>
<body>
   <script src="/components/js/header.js"></script>

  <script src="/components/js/mobile-nav.js"></script>

  <!-- Category Bar -->
  <div class="category-bar">
    <button class="cat-item">
      <a href="/products.html?cat=cooker">
        <img src="/assets/img/Category Images/cooker-icon.jpg" alt="Cooker" width="70" height="70">
      </a>
      <span>Cooker</span>
    </button>
    <button class="cat-item">
      <a href="/products.html?cat=cookware">
        <img src="/assets/img/Category Images/kadhai-icon.jpg" alt="Cookware" width="70" height="70">
      </a>
      <span>Cookware</span>
    </button>
    <button class="cat-item">
      <a href="/products.html?cat=electricals">
        <img src="/assets/img/Category Images/kettle-icon.jpg" alt="Electricals" width="70" height="70">
      </a>
      <span>Electricals</span>
    </button>
    <button class="cat-item">
      <a href="/products.html?cat=accessories">
        <img src="/assets/img/Category Images/idly-icon.jpg" alt="Accessories" width="70" height="70">
      </a>
      <span>Parts &amp; Accessories</span>
    </button>
    <button class="cat-item">
      <a href="/products.html?cat=frying-pan">
        <img src="/assets/img/Category Images/pan-icon.jpg" alt="Frying Pan" width="70" height="70">
      </a>
      <span>Frying Pan</span>
    </button>
    <button class="cat-item">
      <a href="/products.html?cat=tava">
        <img src="/assets/img/Category Images/tava-icon.jpg" alt="Tava" width="70" height="70">
      </a>
      <span>Tava</span>
    </button>
    <button class="cat-item">
      <a href="/products.html?cat=deep-fry-pan">
        <img src="/assets/img/Category Images/dfp-icon.jpg" alt="Deep Fry Pan" width="70" height="70">
      </a>
      <span>Deep Fry Pan</span>
    </button>
    <button class="cat-item">
      <a href="/products.html?cat=sets">
        <img src="/assets/img/Category Images/set-icon.jpg" alt="Sets" width="70" height="70">
      </a>
      <span>Sets</span>
    </button>
    <button class="cat-item">
      <a href="/products.html?cat=saucepan">
        <img src="/assets/img/Category Images/saucepan-icon.jpg" alt="Saucepan" width="70" height="70">
      </a>
      <span>Saucepan</span>
    </button>
    <button class="cat-item">
      <a href="/products.html?cat=handi">
        <img src="/assets/img/Category Images/handi-icon.jpg" alt="Handi" width="70" height="70">
      </a>
      <span>Handi</span>
    </button>
  </div>

  <style>
    /* Category Bar - Horizontal Scrollable Centered */
    .category-bar {
      background: #fff;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px 15px;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      gap: 25px;
      overflow-x: auto;
      overscroll-behavior-inline: contain;
      scroll-snap-type: inline mandatory;
      box-sizing: border-box;
      border-bottom: 1px solid #eee;
    }

    .category-bar::-webkit-scrollbar {
      height: 4px;
    }
    .category-bar::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    .category-bar::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 2px;
    }

    .cat-item {
      display: block;
      font-family: 'Poppins', 'Google Sans', sans-serif;
      font-size: 18px;
      border: none;
      cursor: pointer;
      margin: 0;
      padding: 0;
      background: transparent;
      text-align: center;
      flex-shrink: 0;
      scroll-snap-align: start;
      min-width: 80px;
    }

    .cat-item a {
      padding: 6px 0;
      font-size: 16px;
      color: #a6a6a6;
      font-weight: 300;
      display: block;
      text-decoration: none;
    }

    .cat-item a img {
      display: block;
      margin: 0 auto;
      border-radius: 8px;
      transition: transform 0.2s ease;
    }

    .cat-item:hover a img {
      transform: scale(1.05);
    }

    .cat-item span {
      color: #db0000;
      font-size: 12px;
      font-weight: 500;
      line-height: 18px;
      overflow-wrap: break-word;
      display: inline-block;
      max-width: 80px;
    }

    @media (max-width: 600px) {
      .category-bar {
        gap: 15px;
        padding: 8px 10px;
        justify-content: flex-start;
      }
      .cat-item {
        min-width: 70px;
      }
      .cat-item a img {
        width: 55px;
        height: 55px;
      }
      .cat-item span {
        font-size: 10px;
        max-width: 70px;
      }
    }
  </style>

  <main>
    <section style="padding:2rem;text-align:left;">
      <h1>All Products</h1>
      <p style="color:#555;margin-bottom:1rem;">Browse all Steelbird products. Click a product to open its product page.</p>
    </section>

    <section style="padding:2rem;">
      <div id="products-grid" class="product-grid">
        
      </div>
    </section>
  </main>

  <footer>
    <script src="/components/js/footer.js"></script>
  </footer>

  <button id="scroll-to-top"><i class="fa-solid fa-arrow-up"></i></button>

  <script src="main.js"></script>
  <nav class="mobile-bottom-nav" aria-label="Mobile navigation">
    <div class="nav-row">
      <a href="#" class="mobile-menu"><i class="fa-solid fa-bars"></i><span>Menu</span></a>
      <a href="cart.html" class="mobile-cart"><i class="fa-solid fa-cart-shopping"></i><span>Cart</span></a>
      <a href="index.html" class="mobile-home"><i class="fa-solid fa-home"></i><span>Home</span></a>
            <a href="/login.html" class="mobile-login"><i class="fa-solid fa-user"></i><span>Profile</span></a>
    </div>
  </nav>
  <script>
    (function(){
      // load products from categories/products.json and render a grid (supports optional search query ?q=...)
      const urlParams = new URLSearchParams(window.location.search);
      const searchQuery = (urlParams.get('q') || '').trim();

      fetch('categories/products.json')
        .then(r => r.json())
        .then(products => {
          const grid = document.getElementById('products-grid');
          if(!grid) return;
          grid.innerHTML = '';

          let shown = products;
          if(searchQuery){
            const q = searchQuery.toLowerCase();
            shown = products.filter(p => {
              if(!p) return false;
              if((p.id||'').toLowerCase().includes(q)) return true;
              if((p.title||'').toLowerCase().includes(q)) return true;
              if((p.subtitle||'').toLowerCase().includes(q)) return true;
              if((p.descriptionHtml||'').toLowerCase().replace(/<[^>]*>/g,'').includes(q)) return true;
              if(Array.isArray(p.features) && p.features.join(' ').toLowerCase().includes(q)) return true;
              if(p.specs && Object.values(p.specs).join(' ').toLowerCase().includes(q)) return true;
              return false;
            });
            const heading = document.querySelector('main h1');
            if(heading) heading.textContent = `Search results for "${searchQuery}"`;
            if(shown.length === 0){
              const p = document.createElement('p');
              p.textContent = 'No products found for your search.';
              p.style.color = '#777';
              p.style.marginTop = '0.5rem';
              document.querySelector('main').insertBefore(p, document.querySelector('main').children[1]);
            }
          }

          shown.forEach(p => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.dataset.id = p.id || '';
            const img = (p.images && p.images[0]) ? p.images[0] : 'assets/images/category-1.jpg';
            card.innerHTML = `
              <a href="categories/product-template.html?id=${encodeURIComponent(p.id)}">
                <div class="hexagon"><img src="${img}" alt="${p.title || ''}"></div>
              </a>
              <h3><a href="categories/product-template.html?id=${encodeURIComponent(p.id)}">${p.title || ''}</a></h3>
              <p>₹${p.price || 0}</p>
              <button class="btn-secondary">Add to Cart</button>
            `;
            grid.appendChild(card);
          });
        })
        .catch(err => { console.error('Failed to load products', err); });

      // delegate add-to-cart from grid — navigate to product page first
      document.addEventListener('click', function(e){
        if(e.target.classList.contains('btn-secondary') && e.target.closest('.product-card')){
          const card = e.target.closest('.product-card');
          const id = card.dataset.id;
          window.location.href = 'categories/product-template.html?id=' + encodeURIComponent(id);
        }
      });
    })();
  </script>
</body>
</html>